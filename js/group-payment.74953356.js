(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-payment"],{"159b":function(t,e,a){var s=a("da84"),r=a("fdbc"),i=a("17c2"),o=a("9112");for(var n in r){var c=s[n],l=c&&c.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(d){l.forEach=i}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,r=a("a640"),i=a("ae40"),o=r("forEach"),n=i("forEach");t.exports=o&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1cfd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"comfirm-list"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payConfirm(e)}}},[a("table",{staticClass:"shop-list"},[a("h5",[t._v("Your Shopping List")]),a("thead",[a("th",[t._v(t._s(t.tableHead.product))]),a("th",[t._v(t._s(t.tableHead.quantity))]),a("th",[t._v(t._s(t.tableHead.price))])]),a("tbody",t._l(t.orders.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.product}},[t._v(" "+t._s(e.product.title)+" ")]),a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.quantity}},[t._v(" "+t._s(e.qty)+t._s(e.product.unit)+" ")]),a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.price}},[t._v(t._s(t._f("currency")(e.final_total)))])])})),0)]),a("div",{staticClass:"d-flex"},[a("h5",{staticClass:"price-tag text-success"},[t._v("Price: "+t._s(t._f("currency")(Math.round(t.orders.total))))])]),a("div",{staticClass:"user-info"},[a("div",[a("h5",[t._v("Email: ")]),t._v(" "),a("p",[t._v(t._s(t.orders.user.email))])]),a("div",[a("h5",[t._v("Name: ")]),a("p",[t._v(t._s(t.orders.user.name))])]),a("div",[a("h5",[t._v("Phone number: ")]),a("p",[t._v(t._s(t.orders.user.tel))])]),a("div",[a("h5",[t._v("Billing Address: ")]),a("p",[t._v(t._s(t.orders.user.address))])]),a("div",[t.orders.is_paid?a("span",{staticClass:"text-success"},[t._v("Completed")]):a("span",{staticClass:"text-danger"},[t._v("Not Complete")])])]),a("div",{staticClass:"text-right"},[0==t.orders.is_paid?a("button",{staticClass:"comfirm-btn"},[t._v(" Payment Confirm ")]):t._e()])])]),a("div",{staticClass:"modal fade",attrs:{id:"loadingModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body loading-modal text-center"},[t._m(0),a("h3",{staticClass:"loading-text"},[t._v(t._s(t.loadingMessage))])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")])}],i=(a("99af"),a("1157")),o=a.n(i),n={data:function(){return{tableHead:{product:"Products",quantity:"Quantity",price:"Price"},orderId:"",orders:{products:{},user:{}},loadingMessage:""}},methods:{getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("eric840906","/order/").concat(t.orderId);t.$http.get(e).then((function(e){t.orders=e.data.order}))},payConfirm:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("eric840906","/pay/").concat(t.orderId);o()("#loadingModal").modal("show"),t.loadingMessage="Sending Order",t.$http.post(e).then((function(e){e.data.success?(t.loadingMessage="Payment comfirmed, back to homepage",setTimeout((function(){return o()("#loadingModal").modal("hide")}),1e3),t.getOrder(),setTimeout((function(){return t.$router.push("/")}),2e3)):t.loadingMessage="Connection fail"}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},c=n,l=(a("b267"),a("2877")),d=Object(l["a"])(c,s,r,!1,null,null,null);e["default"]=d.exports},4160:function(t,e,a){"use strict";var s=a("23e7"),r=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"421b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Alert"),a("Banner",{attrs:{picture:t.bannerImg,title:t.pageTitle}}),a("main",{staticClass:"col-md-12",attrs:{role:"main"}},[a("router-view")],1)],1)},r=[],i=a("98ab"),o=a("84af"),n={components:{Alert:i["a"],Banner:o["a"]},data:function(){return{bannerImg:{backgroundImage:"url('https://images.unsplash.com/photo-1519358349916-caa235110a80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80')"},pageTitle:"Enjoy"}}},c=n,l=a("2877"),d=Object(l["a"])(c,s,r,!1,null,null,null);e["default"]=d.exports},"422c":function(t,e,a){},"84af":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"banner",style:t.picture},[a("div",{staticClass:"page-title"},[a("h1",[t._v(t._s(t.title))]),a("br"),a("h1",{staticClass:"lead"})])])])},r=[],i={props:["picture","title"]},o=i,n=(a("f4e2"),a("2877")),c=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=c.exports},"98ab":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])})),0)},r=[],i=(a("4160"),a("a434"),a("159b"),{data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}}),o=i,n=(a("e5be"),a("2877")),c=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=c.exports},"99d0":function(t,e,a){},a434:function(t,e,a){"use strict";var s=a("23e7"),r=a("23cb"),i=a("a691"),o=a("50c4"),n=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),u=a("ae40"),m=d("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!v},{splice:function(t,e){var a,s,d,u,m,v,g=n(this),b=o(g.length),C=r(t,b),y=arguments.length;if(0===y?a=s=0:1===y?(a=0,s=b-C):(a=y-2,s=f(p(i(e),0),b-C)),b+a-s>h)throw TypeError(_);for(d=c(g,s),u=0;u<s;u++)m=C+u,m in g&&l(d,u,g[m]);if(d.length=s,a<s){for(u=C;u<b-s;u++)m=u+s,v=u+a,m in g?g[v]=g[m]:delete g[v];for(u=b;u>b-s+a;u--)delete g[u-1]}else if(a>s)for(u=b-s;u>C;u--)m=u+s-1,v=u+a-1,m in g?g[v]=g[m]:delete g[v];for(u=0;u<a;u++)g[u+C]=arguments[u+2];return g.length=b-s+a,d}})},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},adc1:function(t,e,a){},b267:function(t,e,a){"use strict";var s=a("adc1"),r=a.n(s);r.a},d544:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7 form-block"},[a("form",{staticClass:"userInfo",on:{submit:function(e){return e.preventDefault(),t.buildOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.user.email,expression:"orderForm.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"useremail",placeholder:"Enter e-mail"},domProps:{value:t.orderForm.user.email},on:{input:function(e){e.target.composing||t.$set(t.orderForm.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("email"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("Name*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.user.name,expression:"orderForm.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"Enter name"},domProps:{value:t.orderForm.user.name},on:{input:function(e){e.target.composing||t.$set(t.orderForm.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("Please enter your name")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("Phone")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.user.tel,expression:"orderForm.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"Enter phone number"},domProps:{value:t.orderForm.user.tel},on:{input:function(e){e.target.composing||t.$set(t.orderForm.user,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("Address*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.user.address,expression:"orderForm.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"Enter address"},domProps:{value:t.orderForm.user.address},on:{input:function(e){e.target.composing||t.$set(t.orderForm.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("Please enter your address")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("Message")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.message,expression:"orderForm.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.orderForm.message},on:{input:function(e){e.target.composing||t.$set(t.orderForm,"message",e.target.value)}}})]),t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mb-3"},[a("label",{attrs:{for:"cc-name"}},[t._v("Name*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("cardName")},attrs:{type:"text",name:"cardName",id:"cc-name",placeholder:""}}),t.errors.has("cardName")?a("span",{staticClass:"text-danger"},[t._v("Please enter your name")]):t._e(),a("div",{staticClass:"invalid-feedback"},[t._v(" Name on card is required ")])]),a("div",{staticClass:"col-md-6 mb-3"},[a("label",{attrs:{for:"cc-number"}},[t._v("Card Number*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("credit_field")},attrs:{type:"text",name:"credit_field",id:"cc-number",placeholder:""}}),t.errors.has("credit_field")?a("span",{staticClass:"text-danger"},[t._v("Credit card number is required")]):t._e()])]),t._m(1),t._m(2)])]),a("div",{staticClass:"col-md-5 list-block"},[a("table",{staticClass:"shop-list"},[a("h5",[t._v("Your Shopping List")]),a("thead",[a("th",[t._v(t._s(t.tableHead.product))]),a("th",[t._v(t._s(t.tableHead.quantity))]),a("th",[t._v(t._s(t.tableHead.price))])]),a("tbody",t._l(t.cartList.data.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.product}},[t._v(" "+t._s(e.product.title)+" ")]),a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.quantity}},[t._v(" "+t._s(e.qty)+t._s(e.product.unit)+" ")]),a("td",{staticClass:"list-item",attrs:{"data-head":t.tableHead.price}},[t._v(t._s(t._f("currency")(e.final_total)))]),a("td",{staticClass:"delete-item"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeCart(e.id)}}},[a("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)])])})),0)]),a("div",{staticClass:"d-flex"},[a("p",{class:{"line-cross":t.cartList.data.total!=t.cartList.data.final_total}},[t._v("Total Price: "+t._s(t._f("currency")(t.cartList.data.total)))])]),t.cartList.data.total!=t.cartList.data.final_total?a("div",{staticClass:"applied-text"},[a("p",{staticClass:"text-right text-success"},[t._v("Coupon Applied !")]),a("p",{staticClass:"text-right text-success",attrs:{colspan:"2"}},[t._v("Final Price: "+t._s(t._f("currency")(Math.round(t.cartList.data.final_total))))])]):t._e()])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-block my-3"},[a("label",{attrs:{for:"paymentMethod"}},[t._v("Payment Options*")]),a("div",{staticClass:"custom-control custom-radio"},[a("input",{staticClass:"custom-control-input",attrs:{id:"method1",name:"paymentMethod",type:"radio",required:""}}),a("label",{staticClass:"custom-control-label",attrs:{for:"method1"}},[t._v("Credit card")])]),a("div",{staticClass:"custom-control custom-radio"},[a("input",{staticClass:"custom-control-input",attrs:{id:"method2",name:"paymentMethod",type:"radio"}}),a("label",{staticClass:"custom-control-label",attrs:{for:"method2"}},[t._v("Debit card")])]),a("div",{staticClass:"custom-control custom-radio"},[a("input",{staticClass:"custom-control-input",attrs:{id:"method3",name:"paymentMethod",type:"radio"}}),a("label",{staticClass:"custom-control-label",attrs:{for:"method3"}},[t._v("Paypal")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 mb-3 col-6"},[a("label",{attrs:{for:"cc-expiration"}},[t._v("Expiration*")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"cc-expiration",placeholder:"",required:""}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Expiration date required ")])]),a("div",{staticClass:"col-md-3 mb-3 col-6"},[a("label",{attrs:{for:"cc-expiration"}},[t._v("CVC*")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"cc-cvv",placeholder:"",required:""}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Security code required ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"checkout-btn"},[t._v("Order")])])}],i=(a("99af"),{data:function(){return{tableHead:{product:"Products",quantity:"Quantity",price:"Price"},orderForm:{user:{name:"",email:"",tel:"",address:""},message:""},cartList:{data:{}},coupon_code:""}},methods:{buildOrder:function(){var t=this;t.isLoading=!0;var e=t.orderForm,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("eric840906","/order");t.$validator.validate().then((function(s){s?t.$http.post(a,{data:e}).then((function(e){t.isLoading=!1,e.data.success&&t.$router.push("paymentconfirm/".concat(e.data.orderId))})):t.$bus.$emit("message:push","please fill the form properly","danger")})),t.getCart()},getCart:function(){var t=this;t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("eric840906","/cart");t.$http.get(e).then((function(e){t.isLoading=!1,t.cartList=e.data}))},removeCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("eric840906","/cart/").concat(t);e.$http.delete(a).then((function(t){t.data.success&&e.getCart()}))}},created:function(){this.getCart()}}),o=i,n=(a("dc89"),a("2877")),c=Object(n["a"])(o,s,r,!1,null,"3583f16d",null);e["default"]=c.exports},dc89:function(t,e,a){"use strict";var s=a("422c"),r=a.n(s);r.a},e5be:function(t,e,a){"use strict";var s=a("fffd"),r=a.n(s);r.a},f4e2:function(t,e,a){"use strict";var s=a("99d0"),r=a.n(s);r.a},fffd:function(t,e,a){}}]);
//# sourceMappingURL=group-payment.74953356.js.map